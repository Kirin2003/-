function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 25-Aug-2022 19:22:37.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx20 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;-0.1232524390993;-1.48769668802637;0;0;0;-0.421761970250148;0;12.47;-2.37963648033841;-4.58887987602517;-1.48769668802637;0;-2.88997354525015;-1.19807343013356;0.811];
x1_step1.gain = [0.0370232211625783;0.0303030303030303;2.34529234812727;1.3503854119583;4.1053361559589;2.2576692904899;0.16553524905309;0.0159061298551981;0.0401879583265449;0.1;8.58274580116117;0.728687457290728;0.00167315012339484;0.846021582130605;0.0724833038149613;0.0173829815459583;0.297303278636181;0.572338781541002;0.156820953263608;0.0956068645728763];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.16506354498152520094;-1.6870849868011825734;0.42043787583095515448;0.6492798843574850709;-1.1996609159628732755;0.69621979816705592548;0.33992974359236050041;-0.33803952554612676229;-0.45333946544169306803;-0.23574217724274398877;-0.8897313195233741423;1.1637246100454099462;-0.55187978407443560869;0.62279817155302963361;1.2112630598308491425];
IW1_1 = [0.23308320057819925664 0.6634457706097576235 1.0290898368132439522 -0.19204308886740276141 -0.11679586433908409338 0.68568027331755687648 0.71334800133228648544 -1.3891066759055590296 -0.012453294111812002534 1.0089310536449085376 0.29097094262251710362 -0.52100473818521031433 -0.65206344905495494668 -0.62477496517822583844 -0.78547830023798625998 -0.83464522397686424782 0.75376417213731738975 -0.071079694734563436676 0.36573196493470816471 -0.46714985180077212013;-1.1308163516771099211 -0.014817943683952759099 -0.3477973394557691833 0.47275266091416429104 -0.11434852201315905129 -0.17968856360942658812 0.24333923456298597876 0.27185558813248034138 -1.316399078780598586 -0.13087622712830426774 0.11516830199832261972 -0.55325657987883503086 0.73252809180266953426 0.038875003002073783842 -1.0298410092878973465 -0.93906310725674269069 0.4259896052730194338 0.55467543533643970388 -0.2789708485337313304 -0.98990672256921952155;-0.076495643417397105046 0.08174192427382058479 0.36142794860078869545 -0.53826296143322083232 -0.98282606681601158982 0.197405247030935177 0.37744544142949731924 0.14651632764914379603 1.0834962634757063782 -0.051472708184064387693 -0.51083675978014908559 -0.74155262254705567315 0.12287374371470248524 0.059464714489071736347 -1.1199330773921678528 0.51976389872356987265 -0.086936124211456827782 0.38174008835228834258 0.16968510095793826187 0.064025235445609798846;-0.29187052842012412013 1.1640949329660805756 -1.3645069959210349708 -0.43058202575524390232 -0.19249161458444155604 -0.32456934883509069856 -0.54609548931659679383 0.036857791446359658427 0.075821514897073075123 -0.3197620757084866927 -0.070254675447214420814 0.35627347661625607955 -0.079779840588773215382 -0.048720456287369900972 0.67541117836322894785 -0.12134111042818088166 -0.28368474283407651981 1.4809715489324664084 -0.17236667707061767429 0.34528277305278315401;0.23365042134967992093 0.31739667750498590237 0.049440914208700642574 1.8338831236483463805 -0.73788050885037170801 -0.54414879717308595186 0.20598260612694341276 0.086382932526054084788 -0.45786845746313198369 -1.1042600316641462133 -0.24486110823737874953 0.2149158950380964106 -0.36355102047757936745 0.68098198337822313242 1.0229412456471584925 0.45829325068912241115 -0.098689988385649435321 -0.26700393039861675115 -0.2810790602379184544 -0.18242007022743952915;0.35085011547470951188 -0.19690353307487098999 -0.712764497988637169 -0.44445717466703926757 0.70545993745855894996 -0.079435255328259526952 0.047316421607640823943 0.55925910678083123884 0.62900732492744626523 0.29537063692322856889 -0.96262918729702184883 0.95849159662734917386 0.24968274511246912883 1.2080951294431443444 -0.80247682954111632103 0.36678050814865603702 -0.46912428127588023941 -0.13278308994270468513 -0.13739158975357734782 0.26037838680459052254;-0.92999041051894959509 1.8880611541895224725 -0.16451638414370264862 0.0064455505241399948385 -0.35923851437012394028 -0.50429711871344373719 -0.075997409475313179583 0.059982128278660187815 -1.3743122977845885213 -0.20925832963720222835 0.079016386863292917275 -1.342434444885250544 -0.0089185995715574221954 0.46589852307511492313 -0.30252612865046790702 0.52415454794965388174 0.29057082474058598676 0.55624972021715390902 -0.057867024390732484107 0.37322848000198083351;0.47453797817691034666 -0.35164151150079930863 0.29165118161445718892 1.0831689206165169281 -0.34145269139481115861 -0.23001207014512312088 0.01013152061199577153 0.16875521864409079309 0.29249622444240269692 -0.26637365148563912909 -0.38793261731644967938 0.18256240940828347141 -0.17122919804022371237 1.260205607621661672 0.81664401435365741033 -0.02103807423994622644 -0.28893600191316864967 -0.97306334900341684424 -0.17611813986596225323 0.067617440886560908897;0.37939367676201363189 -0.50079058447614865912 1.3873172601228720424 0.12295295726625288246 0.47681591737161949096 -1.3578393068104865904 0.45985134093609741912 -1.2755468698883374312 -0.82167205199929926884 0.48897297727033200987 0.3824898075505447359 0.25163946895153033179 0.51722324287845311552 -0.030606994220141563179 0.60309845120528793316 -0.046113471835877904714 0.53240108490118476237 -0.21433808040868171374 -0.054574010522548448143 -0.35561175182756121771;-0.44576345430954911198 0.27497243602386728378 0.55432252643467871955 0.24529307695243612875 -1.0724847097739860224 0.040795196193791502526 -0.43279385025751904159 -0.47059488847857167126 0.67506752393398783418 -0.1717746435312717812 0.27389069585443814869 -0.69897834188080254503 -0.12403206329655103168 -0.49747100355894663393 -0.39789222471468521647 -0.83663250907011121882 0.69060047084110220972 -0.10433938070721363034 0.041420579616726599381 0.70688462430268572678;-0.15563030167509336876 -0.30982388825934370491 0.41936124660543161458 -0.31616961610423588436 0.035554953757057035368 -0.89011090860438280004 -0.1235190275368910906 -1.1178458354669416064 0.4026181599069028616 1.3045717117599116008 0.039150296680069036903 -0.29991667604029220717 0.60400328360078958667 -0.3915939204308790389 0.80482257872587237291 -1.7428783218195116334 -0.1934759022240040427 1.0443615220034652147 -0.37045247636250661083 0.31761498338414390075;-0.053831835427575275288 -0.44316807266076513327 -0.51114023831592381164 0.64837209817338559148 -0.50873963842189584561 -0.23537609591550423538 -0.033435572580820784039 0.42943690233149861557 -0.77265298182611585887 -1.3798366221937756748 0.3820707144278403522 0.65908070442161947877 0.91117608937280503145 0.28467211886501020413 1.6390023040001657773 0.73771471308878788786 -0.18653990226677333308 -0.26192372985647283112 0.0020922739336931401276 -0.28984641276766803797;0.56552782117779964999 -0.66212428184343763427 0.034497527686837163585 -0.19224040074429496472 1.1779528288900422694 -0.56373664415509960879 -0.36327793322374074547 0.43838542877480701776 0.41126149906933490152 -0.52452167237275670875 0.1902510823959713826 -0.17396554533762559336 -0.74539655935040360912 0.60677070605535210479 -1.0026904804460827769 0.20047981275253295985 0.43491048430393736135 -0.27594249625170802487 -0.13359683143867004396 -0.77479573878581231572;0.1810115144902696982 -0.24686159940862151263 0.35676078931829247054 -0.11121574057081484721 0.57903579001439675622 0.051048402355920903528 -0.50113957318550583775 -0.88797314131507776302 1.0047933264373565265 -0.054453945835492074956 -0.014875545527271225379 -1.1392598331535011003 0.2745287498889657507 -0.2950817346181744405 -0.84912229922441195828 -0.31599045889776827822 0.38958947218564521364 0.47438580595325463563 0.017649123453229578068 0.52111949106987265345;0.2287326308827018484 -0.74947971708292360216 1.0672389221290630168 -0.081719914510499536142 -0.60061533884889706236 -0.18344691484438202522 0.70879844981025608153 -0.84810777220193744874 0.28102743206222741135 0.98247250260187246607 -0.43367734293478465979 0.71900172434309772562 0.25968893724889619001 0.071942565007214367978 -0.55024928101146419746 1.0159400315177637975 -0.67563374192617997593 0.2726793589755532321 0.095447159333731074193 0.069860692313875386028];

% Layer 2
b2 = -0.44488807074565411837;
LW2_1 = [-1.322964670269073828 1.5066361004543247226 1.5090059301485176935 1.9668667908961794399 -1.261130803384705068 -1.5959838896886158199 -1.7168184825569408058 1.9605506609274419016 1.6020312253996156215 -1.5994340299709066677 -1.7654492635562735181 -1.7373922808833972553 -1.6288506799084025989 2.4481255670983035344 -1.0756755191937859006];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.253764912943679;
y1_step1.xoffset = 2.45593195564972;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
